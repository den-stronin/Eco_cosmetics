{"version":3,"sources":["scripts/cart.js"],"names":["productsBtn","document","querySelectorAll","cartProductsList","querySelector","cart","cartQuantity","fullPrice","price","randomId","Math","random","toString","substring","priceWithoutSpaces","str","replace","normalPrice","String","plusFullPrice","currentPrice","minusFullPrice","printFullPrice","textContent","printQuantity","productsListLength","children","length","classList","add","remove","generateCartProduct","img","title","cost","id","deleteProducts","productParent","dataset","disabled","parseInt","forEach","el","closest","setAttribute","addEventListener","e","self","currentTarget","parent","getAttribute","priceString","priceNumber","insertAdjacentHTML","target","contains"],"mappings":";AAAA,aAEA,IAAMA,EAAcC,SAASC,iBAAiB,cACxCC,EAAmBF,SAASG,cAAc,uBAC1CC,EAAOJ,SAASG,cAAc,SAC9BE,EAAeD,EAAKD,cAAc,mBAClCG,EAAYN,SAASG,cAAc,8BACrCI,EAAQ,EAENC,EAAW,WACRC,OAAAA,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,IAC7CH,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAAG,KAGtCC,EAAqB,SAACC,GACnBA,OAAAA,EAAIC,QAAQ,MAAO,KAGtBC,EAAc,SAACF,GACZG,OAAAA,OAAOH,GAAKC,QAAQ,8BAA+B,QAGtDG,EAAgB,SAACC,GACrBZ,GAASY,GAGLC,EAAiB,SAACD,GACtBZ,GAASY,GAGLE,EAAiB,WACrBf,EAAUgB,YAAiBN,GAAAA,OAAAA,EAAYT,KAGnCgB,EAAgB,WACdC,IAAAA,EAAqBtB,EAAiBC,cAC1C,iCACAsB,SAASC,OAEXrB,EAAaiB,YAAcE,EAE3BA,EAAqB,EACjBpB,EAAKuB,UAAUC,IAAI,gBACnBxB,EAAKuB,UAAUE,OAAO,gBAEC,IAAvBL,GACFxB,SAASG,cAAc,iBAAiBwB,UAAUE,OAChD,yBAKAC,EAAsB,SAACC,EAAKC,EAAOC,EAAMC,GAGsBA,MAAAA,6GAAAA,OAAAA,EACjDH,0BAAAA,OAAAA,EAAuCC,qCAAAA,OAAAA,EAGfA,8FAAAA,OAAAA,EACEhB,uDAAAA,OAAAA,EAAYiB,GAPxD,2IAgBIE,EAAiB,SAACC,GAChBF,IAAAA,EAAKE,EAAcjC,cAAc,iBAAiBkC,QAAQH,GAEhElC,SAASG,cAAgC+B,kBAAAA,OAAAA,EAAQ/B,OAAAA,cAC/C,cACAmC,UAAW,EAEPnB,IAAAA,EAAeoB,SACnB1B,EACEuB,EAAcjC,cAAc,wBAAwBmB,cAIxDF,EAAeD,GACfE,IACAe,EAAcP,SACdN,KAGFxB,EAAYyC,QAAQ,SAAAC,GAClBA,EAAGC,QAAQ,SAASC,aAAa,UAAWnC,KAE5CiC,EAAGG,iBAAiB,QAAS,SAACC,GACtBC,IAAAA,EAAOD,EAAEE,cACTC,EAASF,EAAKJ,QAAQ,SACtBR,EAAKc,EAAOX,QAAQH,GACpBH,EAAMiB,EAAO7C,cAAc,cAAc8C,aAAa,OACtDjB,EAAQgB,EAAO7C,cAAc,gBAAgBmB,YAC7C4B,EAAcrC,EAClBmC,EAAO7C,cAAc,uBAAuBmB,aAGxC6B,EAAcZ,SAClB1B,EACEmC,EAAO7C,cAAc,uBAAuBmB,cAIhDJ,EAAciC,GACd9B,IAEAnB,EAAiBC,cACf,iCACAiD,mBACA,aAActB,EAAoBC,EAAKC,EAAOkB,EAAahB,IAE7DX,IACAuB,EAAKR,UAAW,MAIpBpC,EAAiB0C,iBAAiB,QAAS,SAACC,GACtCA,EAAEQ,OAAO1B,UAAU2B,SAAS,yBAC9BnB,EAAeU,EAAEQ,OAAOX,QAAQ","file":"cart.4e35ee6e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst productsBtn = document.querySelectorAll('.card__btn');\nconst cartProductsList = document.querySelector('.cart-content__list');\nconst cart = document.querySelector('.cart');\nconst cartQuantity = cart.querySelector('.cart__quantity');\nconst fullPrice = document.querySelector('.cart-content__total-price');\nlet price = 0;\n\nconst randomId = () => {\n  return Math.random().toString(36).substring(2, 15)\n  + Math.random().toString(36).substring(2, 15);\n};\n\nconst priceWithoutSpaces = (str) => {\n  return str.replace(/\\s/g, '');\n};\n\nconst normalPrice = (str) => {\n  return String(str).replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ');\n};\n\nconst plusFullPrice = (currentPrice) => {\n  price += currentPrice;\n};\n\nconst minusFullPrice = (currentPrice) => {\n  price -= currentPrice;\n};\n\nconst printFullPrice = () => {\n  fullPrice.textContent = `${normalPrice(price)}`;\n};\n\nconst printQuantity = () => {\n  const productsListLength = cartProductsList.querySelector(\n    '.cart-content__list-container'\n  ).children.length;\n\n  cartQuantity.textContent = productsListLength;\n\n  productsListLength > 0\n    ? cart.classList.add('cart--active')\n    : cart.classList.remove('cart--active');\n\n  if (productsListLength === 0) {\n    document.querySelector('.cart-content').classList.remove(\n      'cart-content--active'\n    );\n  }\n};\n\nconst generateCartProduct = (img, title, cost, id) => {\n  return `\n    <li class=\"cart-content__item\">\n      <article class=\"cart-content__product cart-product\" data-id=\"${id}\">\n        <img src=\"${img}\" class=\"cart-product__img\" alt=\"${title}\">\n\n        <div class=\"cart-product__text\">\n          <h5 class=\"cart-product__title\">${title}</h5>\n          <span class=\"cart-product__price\">${normalPrice(cost)}</span>\n        </div>\n\n        <button class=\"cart-product__delete\" aria-label=\"Delete\"></button>\n      </article>\n    </li>\n  `;\n};\n\nconst deleteProducts = (productParent) => {\n  const id = productParent.querySelector('.cart-product').dataset.id;\n\n  document.querySelector(`.card[data-id=\"${id}\"]`).querySelector(\n    '.card__btn'\n  ).disabled = false;\n\n  const currentPrice = parseInt(\n    priceWithoutSpaces(\n      productParent.querySelector('.cart-product__price').textContent\n    )\n  );\n\n  minusFullPrice(currentPrice);\n  printFullPrice();\n  productParent.remove();\n  printQuantity();\n};\n\nproductsBtn.forEach(el => {\n  el.closest('.card').setAttribute('data-id', randomId());\n\n  el.addEventListener('click', (e) => {\n    const self = e.currentTarget;\n    const parent = self.closest('.card');\n    const id = parent.dataset.id;\n    const img = parent.querySelector('.card__img').getAttribute('src');\n    const title = parent.querySelector('.card__title').textContent;\n    const priceString = priceWithoutSpaces(\n      parent.querySelector('.card__cost--common').textContent\n    );\n\n    const priceNumber = parseInt(\n      priceWithoutSpaces(\n        parent.querySelector('.card__cost--common').textContent\n      )\n    );\n\n    plusFullPrice(priceNumber);\n    printFullPrice();\n\n    cartProductsList.querySelector(\n      '.cart-content__list-container'\n    ).insertAdjacentHTML(\n      'afterbegin', generateCartProduct(img, title, priceString, id)\n    );\n    printQuantity();\n    self.disabled = true;\n  });\n});\n\ncartProductsList.addEventListener('click', (e) => {\n  if (e.target.classList.contains('cart-product__delete')) {\n    deleteProducts(e.target.closest('.cart-content__item'));\n  }\n});\n"]}